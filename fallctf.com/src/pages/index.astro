---
import { getCollection } from 'astro:content';
import dayjs from 'dayjs';

const events = (await getCollection('events', (event) => event.data.series === "fallctf")).sort(
  (a, b) => b.data.time_start.valueOf() - a.data.time_start.valueOf()
);

// TODO: ensure that canonical URL points to year of latest event
return Astro.rewrite(`/${dayjs(events[0].data.time_start).format('YYYY')}/`);
---